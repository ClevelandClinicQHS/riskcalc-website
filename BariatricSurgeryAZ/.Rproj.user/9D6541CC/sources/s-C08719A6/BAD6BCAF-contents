#Created: 2019-05-13
#Author: Alex Zajichek
#Project: Individualized Diabetes Complications Risk Scores
#Description: Holds user interface objects

fluidPage(
  
  #Add title
  titlePanel(
    title = "10-year Individualized Diabetes Complications Risk Scores"
  ),
  
  #Make a side panel and main display
  sidebarLayout(
    
    #Create the side panel
    sidebarPanel(
      
      #Add tabs for each set of predictors
      tabsetPanel(
        
        #Demographics
        tabPanel(
          title = "Demographics",
          value = "demographics",
          
          ##Tab content
          HTML("<br>"),
          #Age
          numericInput(
            inputId = "age",
            label = "Age (years)",
            value = 60,
            min = 18,
            max = 80
          ),
          
          #Gender
          selectInput(
            inputId = "gender",
            label = "Gender",
            choices = 
              c(
                "Male",
                "Female"
              )
          ),
          
          #BMI
          numericInput(
            inputId = "bmi",
            label = HTML("BMI (kg/m<sup>2</sup>)"),
            value = 30,
            min = 30,
            max = 200
          ),
          
          #Race
          selectInput(
            inputId = "race",
            label = "Race",
            choices = 
              c(
                "White",
                "Black",
                "Other"
              )
          ),
          
          #Smoking status
          selectInput(
            inputId = "smoking",
            label = "Smoking status",
            choices = 
              c(
                "Never",
                "Quit",
                "Current"
              )
          )
        ),
        
        #Medical history
        tabPanel(
          title = "Medical history",
          value = "medicalhistory",
          
          ##Tab content
          HTML("<br>"),
          checkboxGroupInput(
            inputId = "hx_list",
            label = "History of (check all that apply):",
            choiceNames = 
              list(
                "Coronary artery disease (CAD)",
                "Cerebrovascular disease (stroke)",
                "COPD",
                "Diabetic neuropathy",
                "Dialysis",
                "Dyslipidemia",
                "Heart failure",
                "Nephropathy",
                "Hypertension",
                "Peripheral arterial disease (PAD)"
              ),
            choiceValues = 
              as.list(
                paste0(
                  "HX_",
                  c(
                    "CAD",
                    "CVD",
                    "COPD",
                    "DiabeticNeuropathy",
                    "Dialysis",
                    "Dyslipidemia",
                    "CHF",
                    "Nephropathy",
                    "Hypertension",
                    "PAD"
                  )
                )
              )
          )
        ),
        
        ##Labs
        tabPanel(
          title = "Labs",
          value = "labs",
          
          #Tab content
          HTML("<br>"),
          #A1C
          numericInput(
            inputId = "a1c",
            label = "A1c (%)",
            value = 7.1,
            min = 1,
            max = 30,
            step = 0.1
          ),
          
          #BP
          span(
            "Blood pressure",
            style = "font-size:16px"
          ),
          fluidRow(
            column(
              4,
              numericInput(
                inputId = "systolic",
                label = "systolic",
                value = 135,
                min = 50,
                max = 500,
                step = 1
              )
            ),
            column(
              4,
              numericInput(
                inputId = "diastolic",
                label = "diastolic",
                value = 75,
                min = 10,
                max = 200,
                step = 1
              )
            )
          ),
          
          #Creatinine
          numericInput(
            inputId = "creatinine",
            label = "Creatinine (mg/dL)",
            value = 1,
            min = 0,
            max = 100,
            step = .1
          ),
          
          #Triglyceride
          numericInput(
            inputId = "triglyceride",
            label = "Triglyceride (mg/dL)",
            value = 150,
            min = 1,
            max = 1000,
            step = 1
          )
        ),
        
        ##Medications
        tabPanel(
          title = "Current medications",
          value = "medications",
          
          ##Tab content
          HTML("<br>"),
          checkboxGroupInput(
            inputId = "med_list",
            label = "Current medications (check all that apply):",
            choiceNames = 
              list(
                "ACE-I/ARB",
                "Other antihyperintensives",
                "Aspirin",
                "Statin (or other cholesterol-lowering medication)",
                "Insulin",
                "Other diabetes medication (non-insulin)",
                "Warfarin"
              ),
            choiceValues = 
              list(
                "ACEInhibitorsARBS",
                "OtherAntihypertensives",
                "Aspirin",
                "CholesterolLowering",
                "Insulin",
                "NonInsulinDiabetesMedication",
                "Warfarin"
              )
          )
          
        )
        
      )
      
    ),
    
    #Main content
    mainPanel(
      
      #Button to run calculator
      actionButton(
        inputId = "run",
        label = "Run calculator",
        style="color: #fff; background-color: #337ab7; border-color: #2e6da4"
      ),
      HTML("<br><br><br>"),
      
      #Table of predictions
      dataTableOutput(
        outputId = "table1"
      ) %>% 
        withSpinner(
          color = "#337ab7",
          type = 8
        ),
      
      HTML("<br>"),
      
      #References
      wellPanel(
        span(
          textOutput(
            outputId = "reference"
          ),
          style = "font-size: 25px"
        ),
        textOutput(
          outputId = "reference_text"
        )
      ),
      
      HTML("<br>"),
      
      #Disclaimer
      wellPanel(
        span(
          textOutput(
            outputId = "disclaimer"
          ),
          style = "font-size: 25px"
        ),
        textOutput(
          outputId = "disclaimer_text"
        )
      ),
      
      #Add CCF letterhead
      img(
        src = "letterhead.png"
      )
      
    )
    
  )
  
)
